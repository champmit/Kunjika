{% extends "base.html" %}
{% block title %}{{ title }} - Kunjika{% endblock %}
{% block css_bootstrap %}
    {{ super() }}
    {# TODO: probably remove this and let the user set it manually? #}
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
{% endblock %}
{% block css_site %}
    <link href="/static/css/kunjika.css" rel="stylesheet">
{% endblock %}
{% block container %}
    <div class="row-fluid">
    <h3>Please set your options for new poll</h3>
    <div class="mainbar" id="mainbar">
        <form class="ask-form" method="post" aciton="/poll">
            {% from "macros.html" import render_field %}
            {{ form.csrf_token }}
            {{ render_field(form.poll_answers) }}
            <div class="controls">
                <button class="btn btn-primary">
                    Next
                </button>
            </div>
        </form>
        <hr>
        <div id="qsummary">
            <h3>Current Polls</h3>
            <hr>
            {% for question in poll_list %}
                <div id="qsummary-{{ question['qid'] }}" class="qsummary narrow">
                    <div class="cpx">
                        <div class="votes">
                            <div class="mini-counts">{{ question['votes'] }}</div>
                            <div>votes</div>
                        </div>
                        {% if question['acount'] == 0 %}
                            <div class="status unanswered">
                                <div class="mini-counts">{{ question['acount' ] }}</div>
                                <div>answers</div>
                            </div>
                        {% else %}
                            <div class="status answered">
                                <div class="mini-counts">{{ question['acount' ] }}</div>
                                <div>answers</div>
                            </div>
                        {% endif %}
                        <div class="views">
                            <div class="mini-counts">{{ question['views'] }}</div>
                            <div>views</div>
                        </div>
                    </div>
                    <div class="summary">
                        <h4>
                            {% if 'sticky' in question and question['sticky'] == True %}
                                <a class="question-hyperlink"
                                   href="/questions/{{ question['qid'] }}/{{ question['content']['url'] }}"
                                   title="{{ question['content']['description'][:200] }}" ><i class="icon-pushpin"></i> {{ question['title'] }}</a>
                            {% else %}
                                <a class="question-hyperlink"
                                   href="/questions/{{ question['qid'] }}/{{ question['content']['url'] }}"
                                   title="{{ question['content']['description'][:200] }}" > {{ question['title'] }}</a>
                            {% endif %}
                        </h4>
                        <div class="tags">
                            <i class="icon-tags" style="color:#a4c639;"></i>
                            {% for tag in question['content']['tags'] %}
                                <a class="post-tag" href="/questions/tagged/{{ tag }}">{{ tag }}</a>
                            {% endfor %}
                        </div>
                        <div class="started">
                            <p>Asked on {{ question['tstamp'] }} by <a
                                    href="/users/{{ question['content']['op'] }}/{{ question['opname']|urlencode }}">{{ question['opname'] }}</a>
                            </p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div style="clear: both"></div>
        {{ render_pagination(pagination) }}
    </div>
    <div id="sidebar">
        <div class="count">
            <div class="module" id="questions-count">
                <div class="summarycount al">{{ qcount }}</div>
                <p>questions</p>
            </div>
            <div class="module" id="questions-count">
                <div class="summarycount al">{{ acount }}</div>
                <p>answers</p>
            </div>
            <div class="module" id="questions-count">
                <div class="summarycount al">{{ ucount }}</div>
                <p>users</p>
            </div>
            <div class="module" id="questions-count">
                <div class="summarycount al">{{ tcount }}</div>
                <p>tags</p>
            </div>
        </div>
                <div id="popular-tags" class="module">
                    <h3><a href="/tests">Tests</a></h3>
                </div>
            <div id="popular-tags" class="module">
                <h4 id="h-popular-tags">Popular Tags</h4>
                {% for tag in tag_list %}
                    <a href="/questions/tagged/{{ tag['tag'] }}" class="post-tag"
                       title="show questions tagged '{{ tag['tag'] }}'" rel="tag">{{ tag['tag'] }}</a>
                    <span class="item-multiplier"><span class="item-multiplier-x">Ã—</span>&nbsp;<span
                            class="item-multiplier-count">{{ tag['count'] }}</span></span>
                    <br/>
                {% endfor %}
            </div>
        </div>
{% endblock %}

{% block page_footer %}
    <div class="row-fluid">
        <div class="container">
            <hr/>
            <p>&copy; 2013 <a href="https://10hash.com">10hash.com</a>. Developed by Binita Ruby,
                Shashikant &amp; Shiv Shankar Dayal.<br/>
                Licensed under GNU GPL. Contents are under GNU GPL.</p>
        </div>
    </div>
    </div>

{% endblock %}
